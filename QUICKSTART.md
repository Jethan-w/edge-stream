# EdgeStreamPro å¿«é€Ÿå¼€å§‹æŒ‡å—

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å¿«é€Ÿä¸Šæ‰‹EdgeStreamProç³»ç»Ÿï¼Œè¿è¡Œå®Œæ•´çš„ç¤ºä¾‹ç¨‹åºã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿æ‚¨çš„ç³»ç»Ÿæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š

- **Go 1.19+** 
- **å†…å­˜**: è‡³å°‘ 2GB
- **ç£ç›˜ç©ºé—´**: è‡³å°‘ 1GB

æ£€æŸ¥Goç¯å¢ƒï¼š
```bash
go version
```

### 2. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd edge-stream
```

### 3. å®‰è£…ä¾èµ–

```bash
go mod download
go mod tidy
```

### 4. åˆ›å»ºå¿…è¦ç›®å½•

```bash
make setup
```

æˆ–è€…æ‰‹åŠ¨åˆ›å»ºï¼š
```bash
mkdir -p config bundles state/local metrics logs output temp input window-state
```

### 5. è¿è¡Œç¤ºä¾‹

#### è¿è¡Œå®Œæ•´ç¤ºä¾‹
```bash
make run
```

#### è¿è¡Œçª—å£ç®¡ç†ç¤ºä¾‹
```bash
make run-window
```

#### è¿è¡Œæ‰€æœ‰ç¤ºä¾‹
```bash
make run-all
```

## ğŸ“‹ ç¤ºä¾‹è¯´æ˜

### å®Œæ•´ç¤ºä¾‹ (`complete_example.go`)

è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†EdgeStreamProç³»ç»Ÿçš„æ‰€æœ‰ä¸»è¦åŠŸèƒ½ï¼š

1. **é…ç½®ç®¡ç†** - åŠ è½½é…ç½®ã€æ•æ„Ÿå±æ€§åŠ å¯†ã€é…ç½®å˜æ›´ç›‘å¬
2. **è¿æ¥å™¨æ³¨å†Œ** - NARåŒ…ç®¡ç†ã€ç»„ä»¶æ³¨å†Œã€ç‰ˆæœ¬æ§åˆ¶
3. **çŠ¶æ€ç®¡ç†** - æœ¬åœ°å’Œåˆ†å¸ƒå¼çŠ¶æ€å­˜å‚¨
4. **æŒ‡æ ‡æ”¶é›†** - å®æ—¶ç›‘æ§ã€æŒ‡æ ‡èšåˆã€å¤šç§æ ¼å¼å¯¼å‡º
5. **æµå¼•æ“** - å¤šçº¿ç¨‹å¤„ç†ã€èƒŒå‹ç®¡ç†
6. **æ•°æ®æº** - å¤šåè®®æ”¯æŒã€å®‰å…¨æ¥æ”¶
7. **å¤„ç†å™¨** - æ•°æ®è½¬æ¢ã€é”™è¯¯å¤„ç†ã€è·¯ç”±ã€è„šæœ¬å¤„ç†
8. **æ•°æ®æ¥æ”¶å™¨** - æ•°æ®åº“å’Œæ–‡ä»¶ç³»ç»Ÿé€‚é…å™¨
9. **ç®¡é“** - ç»„ä»¶è¿æ¥ã€æº¯æºè¿½è¸ª

### çª—å£ç®¡ç†ç¤ºä¾‹ (`window_example.go`)

ä¸“é—¨å±•ç¤ºçª—å£ç®¡ç†åŠŸèƒ½ï¼š

1. **æ—¶é—´çª—å£** - åŸºäºæ—¶é—´çš„æ»‘åŠ¨çª—å£
2. **è®¡æ•°çª—å£** - åŸºäºè®°å½•æ•°é‡çš„çª—å£
3. **ä¼šè¯çª—å£** - åŸºäºæ´»åŠ¨æ—¶é—´çš„çª—å£
4. **è‡ªå®šä¹‰çª—å£** - ç”¨æˆ·å®šä¹‰çš„çª—å£æ¡ä»¶
5. **èšåˆè®¡ç®—** - æ±‚å’Œã€å¹³å‡å€¼ã€è®¡æ•°ç­‰
6. **çª—å£è§¦å‘å™¨** - æ—¶é—´ã€è®¡æ•°ã€è‡ªå®šä¹‰è§¦å‘å™¨

## ğŸ”§ é…ç½®è¯´æ˜

### ä¸»è¦é…ç½®æ–‡ä»¶

- `config/application.properties` - ä¸»é…ç½®æ–‡ä»¶

### å…³é”®é…ç½®é¡¹

```properties
# æµå¼•æ“é…ç½®
stream.engine.max.threads=8
stream.engine.queue.size=1000

# å¤„ç†å™¨é…ç½®
processor.threads=4
processor.batch.size=100

# æ•°æ®åº“é…ç½®
database.url=jdbc:postgresql://localhost:5432/edgestream

# Kafkaé…ç½®
kafka.brokers=localhost:9092
```

## ğŸ“Š ç›‘æ§å’ŒæŒ‡æ ‡

### HTTPç«¯ç‚¹

è¿è¡Œç¤ºä¾‹åï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹ç«¯ç‚¹è®¿é—®æŒ‡æ ‡ï¼š

- `http://localhost:8080/metrics` - Prometheusæ ¼å¼
- `http://localhost:8080/metrics/json` - JSONæ ¼å¼
- `http://localhost:8080/health` - å¥åº·æ£€æŸ¥

### ç¤ºä¾‹è¾“å‡º

```
=== EdgeStreamPro å®Œæ•´ç¤ºä¾‹ ===
1. åˆå§‹åŒ–é…ç½®ç®¡ç†å™¨...
2. åˆå§‹åŒ–è¿æ¥å™¨æ³¨å†Œè¡¨...
3. åˆå§‹åŒ–çŠ¶æ€ç®¡ç†å™¨...
4. åˆå§‹åŒ–æŒ‡æ ‡æ”¶é›†å™¨...
5. åˆå§‹åŒ–æµå¼•æ“...
6. åˆ›å»ºæ•°æ®æº...
7. åˆ›å»ºå¤„ç†å™¨...
8. åˆ›å»ºæ•°æ®æ¥æ”¶å™¨...
9. åˆ›å»ºç®¡é“...
10. å¯åŠ¨æµå¤„ç†...
11. ç›‘æ§å’Œå¯¼å‡ºæŒ‡æ ‡...
=== ç¤ºä¾‹å®Œæˆ ===
```

## ğŸ› ï¸ å¼€å‘å·¥å…·

### Makefile å‘½ä»¤

```bash
# æ„å»º
make build          # æ„å»ºå®Œæ•´ç¤ºä¾‹
make build-window   # æ„å»ºçª—å£ç¤ºä¾‹
make build-all      # æ„å»ºæ‰€æœ‰ç¤ºä¾‹

# è¿è¡Œ
make run            # è¿è¡Œå®Œæ•´ç¤ºä¾‹
make run-window     # è¿è¡Œçª—å£ç¤ºä¾‹
make run-all        # è¿è¡Œæ‰€æœ‰ç¤ºä¾‹

# å¼€å‘
make dev            # å¼€å‘æ¨¡å¼ï¼ˆéœ€è¦å®‰è£…airï¼‰
make fmt            # æ ¼å¼åŒ–ä»£ç 
make lint           # ä»£ç æ£€æŸ¥
make test           # è¿è¡Œæµ‹è¯•

# å…¶ä»–
make help           # æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤
make check-env      # æ£€æŸ¥ç¯å¢ƒ
make profile        # æ€§èƒ½åˆ†æ
```

### æ¨èçš„å¼€å‘å·¥å…·

1. **Air** - çƒ­é‡è½½å·¥å…·
   ```bash
   go install github.com/cosmtrek/air@latest
   ```

2. **golangci-lint** - ä»£ç æ£€æŸ¥
   ```bash
   go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest
   ```

3. **godoc** - æ–‡æ¡£ç”Ÿæˆ
   ```bash
   go install golang.org/x/tools/cmd/godoc@latest
   ```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **é…ç½®æ–‡ä»¶æ‰¾ä¸åˆ°**
   ```bash
   # ç¡®ä¿é…ç½®æ–‡ä»¶å­˜åœ¨
   ls config/application.properties
   ```

2. **ç«¯å£è¢«å ç”¨**
   ```bash
   # æ£€æŸ¥ç«¯å£ä½¿ç”¨æƒ…å†µ
   lsof -i :8080
   # æˆ–ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ç«¯å£
   ```

3. **æƒé™é—®é¢˜**
   ```bash
   # ç¡®ä¿æœ‰å†™å…¥æƒé™
   chmod -R 755 config bundles state metrics logs output temp input window-state
   ```

4. **å†…å­˜ä¸è¶³**
   ```bash
   # å‡å°‘é…ç½®ä¸­çš„çº¿ç¨‹æ•°
   # ä¿®æ”¹ config/application.properties
   stream.engine.max.threads=4
   processor.threads=2
   ```

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f logs/edgestream.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
grep ERROR logs/edgestream.log
```

## ğŸ“ˆ æ€§èƒ½è°ƒä¼˜

### å…³é”®å‚æ•°

- `stream.engine.max.threads` - æœ€å¤§çº¿ç¨‹æ•°
- `stream.engine.queue.size` - é˜Ÿåˆ—å¤§å°
- `processor.batch.size` - æ‰¹å¤„ç†å¤§å°
- `database.pool.size` - æ•°æ®åº“è¿æ¥æ± å¤§å°

### ç›‘æ§æŒ‡æ ‡

- **å¤„ç†å»¶è¿Ÿ** - æ•°æ®å¤„ç†çš„å¹³å‡æ—¶é—´
- **ååé‡** - æ¯ç§’å¤„ç†çš„è®°å½•æ•°
- **é”™è¯¯ç‡** - å¤„ç†å¤±è´¥çš„æ¯”ä¾‹
- **èµ„æºä½¿ç”¨ç‡** - CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨æƒ…å†µ

## ğŸ” å®‰å…¨è€ƒè™‘

1. **æ•æ„Ÿé…ç½®åŠ å¯†**
   - æ•°æ®åº“å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯ä½¿ç”¨åŠ å¯†å­˜å‚¨
   - ä½¿ç”¨AESåŠ å¯†ç®—æ³•

2. **ç½‘ç»œå®‰å…¨**
   - å¯ç”¨HTTPSè¿›è¡Œæ•°æ®ä¼ è¾“
   - é…ç½®é˜²ç«å¢™è§„åˆ™

3. **è®¿é—®æ§åˆ¶**
   - å¯ç”¨è®¤è¯å’Œæˆæƒ
   - å®šæœŸæ›´æ–°å¯†é’¥å’Œè¯ä¹¦

## ğŸ“š æ‰©å±•å¼€å‘

### æ·»åŠ è‡ªå®šä¹‰å¤„ç†å™¨

```go
type CustomProcessor struct {
    // å®ç°processor.Processoræ¥å£
}

func (cp *CustomProcessor) Process(flowFile *flowfile.FlowFile) error {
    // è‡ªå®šä¹‰å¤„ç†é€»è¾‘
    return nil
}
```

### æ·»åŠ è‡ªå®šä¹‰æ•°æ®æº

```go
type CustomSource struct {
    // å®ç°source.Sourceæ¥å£
}

func (cs *CustomSource) Start(ctx context.Context) error {
    // å¯åŠ¨æ•°æ®æº
    return nil
}
```

### æ·»åŠ è‡ªå®šä¹‰èšåˆå‡½æ•°

```go
calculator.RegisterAggregation("custom", func(values []interface{}) interface{} {
    // è‡ªå®šä¹‰èšåˆé€»è¾‘
    return result
})
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ã€‚

### è´¡çŒ®æµç¨‹

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ã€‚

## ğŸ“ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–æœ‰ç–‘é—®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [README.md](examples/README.md) è·å–è¯¦ç»†æ–‡æ¡£
2. æŸ¥çœ‹ [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤) éƒ¨åˆ†
3. æäº¤ [Issue](https://github.com/your-repo/issues)

---

**å¼€å§‹æ‚¨çš„EdgeStreamProä¹‹æ—…å§ï¼** ğŸ‰ 